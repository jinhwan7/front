{"ast":null,"code":"import { io } from \"socket.io-client\";\nexport const socket = io.connect(\"http://localhost:3001/raffles\", {\n  transports: [\"websocket\"]\n});\nexport const initSocketConnection = () => {\n  if (socket) return socket.connect();\n};\nexport const sendSocketMessage = function (cmd) {\n  let body = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  if (socket === null || socket.connected === false) {\n    initSocketConnection();\n  }\n  socket.emit(\"bidding\", {\n    cmd,\n    body\n  });\n};\nconst cbMap = new Map();\nexport const socketInforReceived = (cbType, cb) => {\n  cbMap.set(cbType, cb);\n};\nif (socket.hasListeners(\"bidding\")) {\n  socket.off(\"bidding\");\n}\nsocket.on(\"bidding\", ref => {\n  for (let [, cbValue] of cbMap) {\n    cbValue(null, ref);\n  }\n});\nexport const disconnectSocket = () => {\n  if (socket === null || socket.connected === false) {\n    return;\n  }\n  socket.disconnect();\n  socket = undefined;\n};","map":{"version":3,"names":["io","socket","connect","transports","initSocketConnection","sendSocketMessage","cmd","body","connected","emit","cbMap","Map","socketInforReceived","cbType","cb","set","hasListeners","off","on","ref","cbValue","disconnectSocket","disconnect","undefined"],"sources":["/Users/daniel/Documents/GitHub/miniproject/front/src/Components/SocketComponent.js"],"sourcesContent":["import { io } from \"socket.io-client\";\n\nexport const socket = io.connect(\"http://localhost:3001/raffles\", {\n  transports: [\"websocket\"],\n});\n\nexport const initSocketConnection = () => {\n  if (socket) return socket.connect();\n};\n\nexport const sendSocketMessage = (cmd, body = null) => {\n  if (socket === null || socket.connected === false) {\n    initSocketConnection();\n  }\n  socket.emit(\"bidding\", {\n    cmd,\n    body,\n  });\n};\n\nconst cbMap = new Map();\n\nexport const socketInforReceived = (cbType, cb) => {\n  cbMap.set(cbType, cb);\n};\n\nif (socket.hasListeners(\"bidding\")) {\n  socket.off(\"bidding\");\n}\n\nsocket.on(\"bidding\", (ref) => {\n  for (let [, cbValue] of cbMap) {\n    cbValue(null, ref);\n  }\n});\n\nexport const disconnectSocket = () => {\n  if (socket === null || socket.connected === false) {\n    return;\n  }\n  socket.disconnect();\n  socket = undefined;\n};\n"],"mappings":"AAAA,SAASA,EAAE,QAAQ,kBAAkB;AAErC,OAAO,MAAMC,MAAM,GAAGD,EAAE,CAACE,OAAO,CAAC,+BAA+B,EAAE;EAChEC,UAAU,EAAE,CAAC,WAAW;AAC1B,CAAC,CAAC;AAEF,OAAO,MAAMC,oBAAoB,GAAG,MAAM;EACxC,IAAIH,MAAM,EAAE,OAAOA,MAAM,CAACC,OAAO,EAAE;AACrC,CAAC;AAED,OAAO,MAAMG,iBAAiB,GAAG,UAACC,GAAG,EAAkB;EAAA,IAAhBC,IAAI,uEAAG,IAAI;EAChD,IAAIN,MAAM,KAAK,IAAI,IAAIA,MAAM,CAACO,SAAS,KAAK,KAAK,EAAE;IACjDJ,oBAAoB,EAAE;EACxB;EACAH,MAAM,CAACQ,IAAI,CAAC,SAAS,EAAE;IACrBH,GAAG;IACHC;EACF,CAAC,CAAC;AACJ,CAAC;AAED,MAAMG,KAAK,GAAG,IAAIC,GAAG,EAAE;AAEvB,OAAO,MAAMC,mBAAmB,GAAG,CAACC,MAAM,EAAEC,EAAE,KAAK;EACjDJ,KAAK,CAACK,GAAG,CAACF,MAAM,EAAEC,EAAE,CAAC;AACvB,CAAC;AAED,IAAIb,MAAM,CAACe,YAAY,CAAC,SAAS,CAAC,EAAE;EAClCf,MAAM,CAACgB,GAAG,CAAC,SAAS,CAAC;AACvB;AAEAhB,MAAM,CAACiB,EAAE,CAAC,SAAS,EAAGC,GAAG,IAAK;EAC5B,KAAK,IAAI,GAAGC,OAAO,CAAC,IAAIV,KAAK,EAAE;IAC7BU,OAAO,CAAC,IAAI,EAAED,GAAG,CAAC;EACpB;AACF,CAAC,CAAC;AAEF,OAAO,MAAME,gBAAgB,GAAG,MAAM;EACpC,IAAIpB,MAAM,KAAK,IAAI,IAAIA,MAAM,CAACO,SAAS,KAAK,KAAK,EAAE;IACjD;EACF;EACAP,MAAM,CAACqB,UAAU,EAAE;EACnBrB,MAAM,GAAGsB,SAAS;AACpB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}